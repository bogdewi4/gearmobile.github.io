---
title: "Docker"
layout: post
categories: docker
tags: [docker]
share: true
---

> Все что я узнал о Docker - напишу здесь

# Что такое Docker

Между Виртуальной Машиной (VM) и [Docker](https://www.docker.com/) много общего - оба позволяют запускать в изолированной среде программные продукты. Но есть и различия. Docker - это возможность запускать в изолированной среде любую программу или операционную систему; в Docker можно запустить [OS Ubuntu](https://hub.docker.com/_/ubuntu) или [Node.js](https://hub.docker.com/_/node). В Виртуальной Машине (например, [VirtualBox](https://www.virtualbox.org/)) можно запустить только операционную систему, ту же [Ubuntu](https://www.ubuntu.com/), к примеру.

Зачем это нужно и что это дает? Например, можно установить под Docker (работая в Linux дома) Node.js; под Node поставить Express и настроить его; затем упаковать все это в образ (image) и закинуть на Docker Hub. Затем прийти на работу, стянуть с Docker Hub свой image в Windows и продолжить работу, как будто ничего не изменилось.

Благодаря принципу изолированности образ Node.js+Express будет работать одинаково под Linux дома и под Windows на работе. Операционная система не будет ничего знать про образ Node.js+Express, а образ Node.js+Express - ничего про операционную систему, внутри которой он работает. Преимущество очевидно - не нужно беспокоиться о зависимостях, конфликтах и тому подобном.

## Терминология

Docker - это виртуальная машина для приложений. Можно считать, что это же что и VirtualBox, например. Есть версии Docker под Windows. MacOS, Linux. Машина устанавливается в ОС - и все, внутри нее можно запускать любые контейнеры.

Контейнер - у него просто название такое. На самом деле это обычный процесс операционной системы, такой как сервис в Windows или daemon в Linux \ MacOS. Но этот процесс все же необычный - он умеет изолировать внутри себя работу любого приложения так, что это приложение ничего не знает о внешнем мире. Можно сказать по другому - контейнер - это образ (image), запущенный внутри процесса.

Образ - это особым образом приготовленная программа, которая может запускаться и работать внутри контейнера Docker. Например, можно взять обычный официальный экземпляр Node.js, обработать его - добавить служебные файлы и тп - и получить docker-образ, который может работать внутри Docker. Пример такого образа - [Node](https://hub.docker.com/_/node). Здесь - список наиболее популярных образов - [Browse Popular Images](https://hub.docker.com/search/?q=&type=image).

[Docker Hub](https://hub.docker.com/) - это резозиторий, хранилище docker-образов. Это не единственный такой репозиторий, но - самый популярный.

Есть еще кучка терминов, относящихся к Docker, но вышеназванные - самые важные и популярные.

## Установка Docker

Конечно же описание установки Docker есть на официальном сайте - [Docker Documentation](https://docs.docker.com/). Как видно в описании, есть две версии Docker - Community Edition (CE) и Enterprise Edition (EE). Версия Enterprise Edition - платная, с кучей всяких плюшек, которые необходимы для каких-то специфических целей. Для общих целей отлично подойдет бесплатная Community Edition.

Под Linux есть описание устнавки для CentOS, Debian, Fedora, Ubuntu. Я устанавливал Docker под Linux Mint, поэтому для этого подойдет описание установкт под Ubuntu - [Ubuntu](https://docs.docker.com/install/linux/docker-ce/ubuntu/). Описывать шаги я не буду - это и так хорошо сделано на официальной странице. Но есть один неочевидный момент. В шаге с добавлением репозитория Docker:

```bash
$ sudo add-apt-repository \
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable"
```

... команда \$(lsb_release -cs) "берет" кодовое имя локальной операционной системы. В случае с Linux Mint это может быть Tara, например. Но репозиторий Docker ничего не знает о такой операционной системе, поэтому на шаге:

```bash
$ sudo apt-get install docker-ce docker-ce-cli containerd.io
```

... произойдет ошибка и установка не выполнится. Linux Mint Tara основан на Ubuntu Bionic, поэтому вместо \$(lsb_release -cs) нужно явно прописать - bionic:

```bash
sudo add-apt-repository "deb [arch=amd64] https://download.docker.co/linux/ubuntu bionic stable"
```

На форуме Docker описана эта ситуация - [Docker install on Linux Mint 19 - Codename: Tara - PackageBase: Ubuntu Bionic](https://forums.docker.com/t/docker-install-on-linux-mint-19-codename-tara-packagebase-ubuntu-bionic/59436).

// FILE NAME
// year-month-day-name
2013-01-15-archlinux-slim.md

// CODE SNIPPET
{% highlight javascript %}
// ...
{% endhighlight %}

// INLINE LINK
[link]( "link title")

// ANNOUNCEED LINK
[text][1]

// INLINE IMAGE
![image title]({{site.url}}/images/uploads/2015/08/image.jpg "image alt")

---

[1]: http://speckyboy.com/2015/01/26/six-common-freelancing-myths/ "Six Common Freelancing Myths"
