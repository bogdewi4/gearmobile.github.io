---
title: 'Nib &#8211; библиотека миксинов под Stylus'
author: gearmobile
layout: post
---
> Легкое знакомство с библиотекой Nib под препроцессор Stylus. Эта библиотека является тем же самым, что Compass или Bourbon под препроцессор Sass.

Библиотека миксинов Nib написана под препроцессор Stylus и является аналогом более известных библиотек Compass или Bourbon под препроцессор Sass. С самим препроцессором Stylus я с вами познакомился немного раньше &#8211; скажем так, это было краткое и легкое знакомство.

Библиотека Nib проживает по адресу &#8211; [Nib GitHub][1]. Она маленькая и легкая, но должна быть полезной. Поэтому мне необходимо с ней познакомиться поближе.

### Установка библиотеки Nib

В Сети мною было найдено два способа установки данной библиотеки:

  * с использованием GitHub
  * с использованием менеджера пакетов npm

Второй способ мне кажется более удобным, так как в этом случае библиотека устанавливается **глобально** и доступна для любого проекта из любого места файловой системы. В первом же случае придется устанавливать библиотеку каждый раз &#8211; **локально** в каждый отдельный проект.

Если вдруг в системе еще не установлен препроцессор Stylus, то первоначально необходимо установить его командой:

{% highlight powershell %}
  $ sudo npm install stylus --global
{% endhighlight %}

Не забудьте добавить ключ `--global`, чтобы препроцессор **установился глобально** в системе.

**Установка библиотеки Nib** почти ничем не отличается от установки препроцессора и выполняется командой:

{% highlight powershell %}
  $ sudo npm install nib --global
{% endhighlight %}

Отлично! Все, что теперь осталось сделать &#8211; это **подключить библиотеку** в текущий проект (текущий рабочий Stylus-файл).

Это выполняется директивой `@import`:

{% highlight powershell %}
  @import 'nib'
{% endhighlight %}

Проверим, что библиотека подключена без ошибок и отрабатывает в проекте\файле. Для этого запишем в файле `style.styl` несколько миксинов этой библиотеки и &#8220;натравим&#8221; на файл `style.styl` утилиту `stylus` с несколькими ключами:

{% highlight powershell %}
  $ stylus -u nib -w style.styl
{% endhighlight %}

здесь:

  * `-u nib` &#8211; говорит о том, что при компиляции в CSS должно учитываться наличие библиотеки Nib
  * `-w style.styl` &#8211; мониторить изменения в файле `style.styl` и своевременно выполнять его компиляцию в CSS

Посмотрим на результат компиляции Stylus в CSS &#8211; очень уж любопытно, получилось ли?<figure id="attachment_2163" style="width: 600px;" class="wp-caption aligncenter">

[<img src="http://localhost:7788/third/wp-content/uploads/2014/12/nib-600x440.png" alt="nib" width="600" height="440" class="size-medium wp-image-2163" />][2]<figcaption class="wp-caption-text">Библиотека Nib в действии</figcaption></figure> 

Отлично! Все работает четко &#8211; миксины преобразуются в готовый CSS-код. Правда, выглядит он немного неприглядно &#8211; не причесанный и не почищенный.

Ну это решается просто &#8211; достаточно на этот CSS-файл натравить Gulp-плагины [gulp-csscomb][3] и [gulp-autoprefixer][4].

Главное &#8211; библиотека подключена и работает!

### Nib &#8211; как подружить с Gulp

До этого момента мною использовалась нативная утилита `stylus` для компиляции из формата Stylus в формат CSS. И в том числе &#8211; с поддержкой библиотеки Nib.

Однако, на практике такой способ вряд-ли будет использоваться. Я имею ввиду, что использование лишь одной утилиты `stylus` &#8211; я сомневаюсь, что кому-либо пригодиться.

Гораздо практичнее использование Gulp, у которого есть соответствующий плагин [gulp-stylus][5] для компиляции из формата Stylus в CSS.

Этот плагин имеет поддержку библиотеки Nib, достаточно только настроить таковую в своем проекте.

Ниже я рассмотрю процесс подключения и настройки Nib (а заодно &#8211; и Stylus) в моем любимом Gulp.

#### Установка плагинов gulp-stylus и nib

В своем рабочем проекте необходимо установить два плагина (*с помощью консоли*):

{% highlight powershell %}
  $ sudo npm install gulp-stylus nib --save-dev
{% endhighlight %}

В результате оба пакета установятся в проект и добавятся в файл package.json в качестве зависимостей:

{% highlight javascript %}
  ...
  "gulp-stylus": "^1.3.4",
  "nib": "^1.0.4"
  ...
{% endhighlight %}

#### Настройка файла gulpfile.js

В файле gulpfile.js необходимо внести несколько правок. Первым делом &#8211; добавляем в начало файла две с строки:

{% highlight javascript %}
  var gulp = require('gulp'),
    stylus = require('gulp-stylus'),
    nib = require('nib'),
  ...
{% endhighlight %}

Затем создаем задачу task для компиляции из Stylus в CSS. В качестве параметра у метода `stylus` будет дополнительная строка `use:[nib()]`, говорящая о том, что необходимо использовать библиотеку Nib:

{% highlight javascript %}
  gulp.task('stylus', function () {
    gulp.src('app/styles/common.styl')
      .pipe(plumber())
      .pipe(stylus({use:[nib()]}))
      .pipe(prefixer({
        browsers: ['last 2 versions']
      }))
      .pipe(csscomb())
      .pipe(gulp.dest('dist/assets/styles/'));
  });
{% endhighlight %}

Вот это и все (*необходимый минимум*), чтобы подружить библиотеку Nib c Gulp.

Не забываем подключить в stylus-файл проекта библиотеку:

{% highlight css %}
  @import 'nib'
{% endhighlight %}

### Миксины библиотеки Nib

С подключением библиотеки Nib разобрались. Остался вопрос &#8211; а что там внутри, под капотом у Nib?

С малой толикой миксинов я уже познакомился, когда создавал тестовую страничку подключения и компиляции (*см. изображение выше*).

На [официальной странице Nib][6] есть ссылка на документацию по миксинам &#8211; [Документация миксинов Nib][7].

Там все описано просто и понято, с подробными примерами. Осталось только читать и пользоваться.

В принципе, больше и сказать мне нечего (*по крайней мере &#8211; мне*) по поводу миксинов в Nib. Дальше только &#8211; брать их и использовать на практике.

 [1]: https://github.com/tj/nib "Nib"
 [2]: http://localhost:7788/third/wp-content/uploads/2014/12/nib.png
 [3]: https://www.npmjs.com/package/gulp-csscomb "gulp-csscomb"
 [4]: https://www.npmjs.com/package/gulp-autoprefixer "gulp-autoprefixer"
 [5]: https://www.npmjs.com/package/gulp-stylus "Stylus plugin for gulp"
 [6]: https://github.com/tj/nib "Nib GitHub"
 [7]: http://tj.github.io/nib/ "Документация миксинов Nib"