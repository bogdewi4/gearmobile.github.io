---
title: 'Git Stash'
layout: post
categories: git
tags: [stash, git]
share: true
---

## Git Stash

> Я прямо влюбился в команду stash от git, хотя к самому git отношусь без ... фанатизма.

Команда git stash предназначена для того, чтобы поместить текущие изменения в отдельное хранилище и вернуть файлы к исходному состоянию. То есть git stash прячет изменения в файлах и сохраняет эти изменения отдельно, чтобы потом можно было их вернуть.

### Сохранение изменений

{% highlight bash %}
git stash save "description of stash"
{% endhighlight %}

... создать stash с человекопонятным описанием этого stash - чтобы можно было через день, глядя на него, догадаться вообще, что это такое и зачем оно делалось.

{% highlight bash %}
git stash -u save "description of stash"
{% endhighlight %}

... создать stash с изменениями, которые еще unstaged. Иначе они просто не попадут в снимок stash.

{% highlight bash %}
git stash branch newAwesomeBranch
{% endhighlight %}

... создание новой ветки из _stash@{0}_. Важный момент - чтобы изменения попали с новую ветку, они должны сначала быть помещены в _stash@{0}_.

{% highlight bash %}
git stash branch newAwesomeBranch stash@{1}
{% endhighlight %}

... поместить изменения из конктерного _stash@{1}_ в новую ветку newAwesomeBranch.

### Показ сохраненных изменений

{% highlight bash %}
git stash show
{% endhighlight %}

... показать, какие файлы изменены. Краткая справка, которая просто показывает, где были изменения и в каких файлах.

{% highlight bash %}
git stash show stash@{1}
{% endhighlight %}

... показать краткие изменения в конкретном stash.

{% highlight bash %}
git stash show -p stash@{1}
{% endhighlight %}

... показать изменения в файле. Можно увидеть в файле, что было добавлено или удалено.

{% highlight bash %}
git stash list
{% endhighlight %}

... показать список всех снимков stash. Причем, снимок с номером _stash@{0}_ - это самый последний по времени снимок stash. Дальше - понарастающей - чем больше номер, тем раньше по времени он был сделан.

### Удаление сохраненных изменений

{% highlight bash %}
git stash drop stash@{1}
{% endhighlight %}

... удалить определенный снимок _stash@{1}_.

{% highlight bash %}
git stash drop
{% endhighlight %}

... удалить последний снимок _stash@{0}_.

{% highlight bash %}
git stash clear
{% endhighlight %}

... удалить все изменения stash.

### Применение сохраненных изменений

{% highlight bash %}
git stash apply
{% endhighlight %}

... применить последний по времени снимок stash.

{% highlight bash %}
git stash apply stash@{2}
{% endhighlight %}

... применить конкретный снимок stash.

{% highlight bash %}
git stash pop
{% endhighlight %}

... сокрещение от двух команд - _apply_ и _drop_ - применяет и автоматически удаляет после применения последний снимок stash - _stash@{0}_.

{% highlight bash %}
git stash pop stash@{2}
{% endhighlight %}

... сокрещение от двух команд - _apply_ и _drop_ - применяет и автоматически удаляет после применения конкретный снимок stash - stash@{2}.
