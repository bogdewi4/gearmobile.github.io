---
title: "HTML5 Form Validation"
layout: post
categories: html
tags: [form, html5]
share: true
---

> К вопросу о типах форм в HTML5, регулярных выражениях и валидации форм на основе регулярных выражений. Философское рассуждение на ночь глядя.

## Атрибут required

Наиболее простой способ реализации валидации html-форм - это добавить к `input(type="text")` атрибут `required`.

Данный атрибут сообщает браузерам, что содержимое поля ввода необходимо для заполнения. Теперь браузеры будут проверять содержимое поля ввода - то есть, выполнять его валидацию.

Заметьте - браузеры сами будут это выполнять, без какого-либо участия Javascript/jQuery с нашей стороны (*это и есть одна из многогранных сторон HTML5*).

В CSS3 для форм ввода разработаны два псевдо-класса:

  * :valid
  * :invalid

Оба псевдокласса предназначены для управления видом форм (`border`, `background`, помещения маркеров внутрь или снаружи формы) в случае валидности или невалидности содержимого этой формы.

Например, такой простейший код будет изменять фон поля ввода при валидности или невалидности содержимого:

{% highlight css %}
&__input
  border 1px solid #ddd
  border-radius 5px
  padding 3px 10px

  &:valid
    background-color rgba(245,255,250,.5)

  &:invalid
    background-color rgba(220,20,60,.5)
{% endhighlight %}

Тут возникает законный вопрос - а каким образом браузер определяет, валидное или невалидное содержимое у этого поля?

В данном случае - очень просто и примитивно (*для наглядности примера*). Если поле не содержит никакого (*любого*) символа, то поле считается невалидным и браузер генерирует для данного поля псевдо-класс `:invalid`.

Если же поле содержит хотя бы один символ (*любой - не обязательно текстовый*), то данное поле уже считается валидным и браузер генерирует для этого поля псевдо-класс `:valid`.

> Note! Содержимое атрибута `placeholder` не рассматривается браузером как содержимое формы. Другими словами, если поле ввода имеет атрибут `placeholder` с каким-то значением, то это поле будет считаться браузером все равно невалидным.


## Типы input

Конечно, на практике такое поведение браузера имеет мало смысла, поэтому для валидации форм были созданы различные способы фильтрации введенных данных.

Одним из таких способов фильтрации введенных данных является задание для элемента `input` его типа. Это также одна из “фишек” HTML5 и заключается она в том, что для поля ввода `input` можно указать, какого типа данные ожидаются в нем.

Например, `input(type=“email”)` говорит о том, что в это поле нужно вводить только адреса электронной почты; `input(type=“number”)` - только числа; `input(type=“tel”)` - только номера телефонов; `input(type=“date”)` - только дату; `input(type=“url”)` - только URL-адреса; и так далее.

Краткий список HTML5-типов `input`’ов:

  * email
  * number
  * tel
  * date
  * url
  * time
  * week
  * color
  * search

Эти различные типы input’ов в HTML5 - не просто блаж в угоду призрачной HTML-семантики, как я сам воспринимал их ранее. На самом деле - это именованные *регулярные выражения*.

Ну как - испугал я читателя? На самом деле *регулярные выражения* - это очень просто. Фактически - это набор символов, собранных воедино по определенному правилу и записанных в определенном синтаксисе.

Грубо говоря - `[1,2,3,4,5,6,7,8,9]` - это уже *регулярное выражение*. Если этому регулярному выражению присвоить имя `number`, то получится *именованное регулярное выражение* `number`.

Фактически типы `input`’ов, которые были рассмотрены выше - это *именованные регулярные выражения*, предустановленные разработчиками HTML5\браузеров.

И когда для элемента `input` устанавливается тип `type="email"` (*к примеру*), то этим фактом браузеру всего лишь указывается *предустановленное регулярное выражение*, которое браузер должен будет использовать при проверке введенных данных.

Вот я и подошел к самому интересному моменту - для чего нужны регулярные выражения? А нужны они для проверки введенных данных. Это маска, которую браузер накладывает на введенные пользователем данные. Совпала маска и данные - данные валидные; не совпала маска и введенные данные - данные невалидные.

Помимо предустановленных регулярных выражений, можно создавать свои собственные, для определенных задач. Но для этого необходимо использовать соответствующий синтаксис и другие несложные знания по этой теме.

Подключаются пользовательские регулярные выражения в HTML с помощью атрибута `pattern` и выглядит это таким образом (*регулярное выражение для проверки IPv4-адреса*):

{% highlight html %}
input type="text" pattern="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}"
{% endhighlight %}

> Note! Использование пользовательского `pattern` совместно с любым HTML5-типом (*email, date, range, tel, number и так далее*) для элемента input почти никогда не имеет смысла по определению.

На этом все.

---
