---
title: 'SVG fallback  с помощью jQuery'
author: gearmobile
layout: post
---
Краткая статья, посвященная тому же вопросу &#8211; как реализовать кросс-браузерную поддержку SVG в браузерах. В предыдущей статье &#8220;[SVG fallback с помощью PNG][1]&#8221; было показано **четыре очень интересных способа** реализации такой задачи.

В этой статье будут показаны также несколько способов решения, но уже **с помощью библиотеки jQuery** .

В начале статьи автор рассказывает о преимуществах использования формата графики SVG. Думаю, что многие уже устали читать деферамбы о пользе SVG. Мне, как переводчику, тем более надоело переводить всю эту &#8220;воду&#8221;, поэтому смело ее опускаю и перехожу к главному.

* * *

### jQuery и Modernizr

Для реализации этого способа понадобиться библиотека Modernizr. Код реализации должен выглядеть таким образом:

{% highlight javascript %}
  if (Modernizr.svg) {
   // Supports SVG
  } else {
   // Doesn't support SVG (Fallback)
  }
{% highlight %}

Если Modernizr обнаружит, что пользовательский браузер не поддерживает SVG, то запуститься простой jQuery-скрипт, который произведет замену расширения `svg` на `png` у всех файлов-изображений:

{% highlight javascript %}
  if (!Modernizr.svg) {
    $('img[src*="svg"]').attr('src', function() {
       return $(this).attr('src').replace('.svg', '.png');
    });
  }
{% highlight %}

Данный способ имет точно такие же ограничения, что и скрипт из предыдущей статьи &#8211; &#8220;[SVG fallback с помощью PNG][1]&#8220;. То есть, нужно иметь два комплекта файлов &#8211; один в SVG-формате, другой в PNG-формате. Имена файлов должны быть идентичными.

### SVGMagic &#8211; плагин под jQuery

[SVGMagic][2] &#8211; это простой плагин под библиотеку jQuery, который отыскивает в HTML-документе все SVG-изображения (в том числе и фоновые SVG-изображения). А затем им создаются PNG-копии всех найденных SVG-изображений, если браузер пользователя не поддерживает SVG.

Для работы с плагином SVGMagic достаточно установить его в проект и запустить инициализацию через jQuery:

{% highlight javascript %}
  $(document).ready(function(){
    $('img').svgmagic();
  });
{% highlight %}

Работа плагина SVGMagic строится следующим образом. Проверяется возможность браузером пользователя отображения SVG-изображений. Если такой поддержки нет, то плагин выполняет полную проверку всего HTML-документа и собирает коллекцию всех URL на SVG-файлы, размещенные внутри этого документа.

Затем эта коллекция URL отправляется на сервер плагина. Сервер производит скачивание всех SVG-изображений по этим URL. Затем производиться конвертирование SVG в PNG.

На страницу клиента отправляется новая коллекция URL, которые теперь указывают на файлы формата PNG. Браузер посетителя загружает по этим ссылкам новые PNG-файлы и внешний вид страницы не нарушается.

### SVGeezy &#8211; еще один плагин jQuery

[SVGeezy][3] является fallback-плагином в полном смысле этого слова. Плагин проверяет поддержку SVG в браузере пользователя. Если таковой нет, то выполняется замена значения в атрибуте `src` на то, в котором указывается на путь PNG-файла.

Для работы с плагином нужно подключить его в проект и инициализировать:

{% highlight javascript %}
  svgeezy.init(false, 'png');
{% highlight %}

Первый параметр плагина SVGeezy &#8220;говорит&#8221; ему &#8211; **не выполнять** или **выполнять** проверку. Если необходима проверка плагином SVGeezy браузера и замена изображений, то нужно оставить значение в `false`. Этот параметр может понадобиться в случае, когда нет необходимости в работе плагина на каких-то страницах.

Второй параметр &#8211; это **тип файла**, который будет заменять SVG на странице. Тип файла **может быть любым**; только нужно удостовериться, что файлы с таким расширением существуют.

Например, файл по пути `/images/logo.svg` будет заменен файлом по пути `/images/logo.png`.

* * *

На этом самая интересная часть статьи &#8220;[How to fallback to PNG if SVG not supported?][4]&#8221; завершается. Как лично мне кажется, в данной статье заслуживают внимания только **первый** и **последний** способы реализации SVG fallback.

 [1]: http://localhost:7788/third/?p=2001 "SVG fallback с помощью PNG"
 [2]: https://dirkgroenen.github.io/SVGMagic/index.html "SVGMagic"
 [3]: http://benhowdle.im/svgeezy/ "SVGeezy"
 [4]: http://www.jquerybyexample.net/2014/09/how-to-svg-fallback-with-png-jquery.html "How to fallback to PNG if SVG not supported?"